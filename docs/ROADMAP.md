# Lumina Note 开发路线图

> 最后更新：2024-11-30

---

## 📊 功能完成度概览

| 类别 | 完成度 | 说明 |
|------|--------|------|
| 核心编辑 | 80% | Markdown、LaTeX、代码高亮、分屏 |
| 文件管理 | 70% | 文件树、多标签页、自动保存 |
| 知识管理 | 70% | 反向链接、标签、大纲 |
| 知识图谱 | 50% | 全局图谱、节点交互 |
| AI 功能 | 90% ✨ | Agent 系统、多模型、RAG、实时预览 |
| 搜索功能 | 70% | 全文搜索、正则、高亮 |

**综合评分：约 70% 的 Obsidian 核心功能 + 独特 AI 能力**

---

## ✅ 已完成功能

### 编辑器
- ✅ Markdown 编辑 + 实时预览（三种模式）
- ✅ LaTeX 数学公式（KaTeX）
- ✅ WikiLinks `[[]]` 点击跳转
- ✅ Callouts `> [!note]` 语法
- ✅ 代码高亮（多语言）
- ✅ 任务列表 `- [ ]`
- ✅ 水平/垂直分屏编辑
- ✅ 本地/远程图片渲染

### 文件管理
- ✅ 文件树浏览
- ✅ 创建/删除/重命名文件
- ✅ 多标签页
- ✅ 自动保存（500ms 防抖）
- ✅ 新窗口打开

### 知识管理
- ✅ 反向链接面板
- ✅ 标签系统 + 标签面板
- ✅ 大纲视图（层级过滤）
- ✅ 全文搜索 + 正则 + 高亮

### 知识图谱
- ✅ 全局图谱（Canvas 渲染）
- ✅ 节点交互（点击跳转、拖拽）
- ✅ 右键菜单（孤立视图）
- ✅ 文件夹着色

### AI 功能 🤖
- ✅ **多模型支持**：Anthropic、OpenAI、DeepSeek、Moonshot、Groq、OpenRouter、Ollama
- ✅ **Agent 系统**：4 种模式（editor/organizer/researcher/writer）
- ✅ **7 个 Agent 工具**：read_note、edit_note、write_note、list_notes、move_note、search_notes、attempt_completion
- ✅ **RAG 系统**：向量嵌入、SQLite 存储、语义搜索
- ✅ **实时编辑预览**：逐字动画、绿色高亮、滚动跟随
- ✅ **Diff 预览**：接受/拒绝修改
- ✅ **上下文感知**：自动附加当前文件

---

## 🚧 待完善功能

| 功能 | 状态 | 说明 |
|------|------|------|
| 文件拖拽 | ⏳ | 从左侧拖到右侧打开 |
| 图片拖拽上传 | ⏳ | 粘贴/拖拽图片 |
| 链接悬浮预览 | ⏳ | 鼠标悬停预览 |
| 嵌套标签 | ⏳ | `#parent/child` |
| 知识图谱增强 | ⏳ | 局部图谱、过滤器 |
| 模板系统 | ⏳ | 模板变量 |
| 日记功能 | ⏳ | 每日笔记 |

---

## 🎯 开发路线图

### Phase 1: 核心补全 ✅ 已完成
- ~~反向链接~~ ✅
- ~~标签系统~~ ✅
- ~~大纲视图~~ ✅
- ~~搜索高亮~~ ✅
- ~~分屏编辑~~ ✅
- ~~图片渲染~~ ✅

### Phase 2: AI 系统 ✅ 已完成
- ~~LLM 服务重构~~ ✅（7 个 Provider）
- ~~Agent 系统~~ ✅（4 模式 + 7 工具）
- ~~RAG 向量搜索~~ ✅
- ~~实时编辑预览~~ ✅

### Phase 3: 体验优化（进行中）

**文件拖拽**
- [ ] Sidebar 添加 draggable 支持
- [ ] TabBar 拖放区域
- [ ] SplitEditor 拖放区域
- [ ] 拖拽视觉反馈

**其他优化**
- [ ] 图片拖拽上传
- [ ] 链接悬浮预览
- [ ] 嵌套标签
- [ ] 知识图谱增强

### Phase 4: 重点新功能 🎯

#### 1. Notion 风格数据库（优先级：⭐⭐⭐⭐⭐）
```
目标：可视化数据库，多视图切换，内联编辑
工作量：3-4 周
存储：JSON 文件（vault/Databases/*.db.json）
```

| 阶段 | 内容 | 时间 |
|------|------|------|
| 表格视图 | 列类型、内联编辑、拖拽排序 | 1.5 周 |
| 看板视图 | 按列分组、卡片拖拽 | 1 周 |
| 筛选排序 | 可视化筛选器 | 0.5 周 |
| 高级功能 | 日历视图、画廊、公式、关联 | 1 周 |

**列类型**：Text、Number、Select、Multi-select、Date、Checkbox、URL、Formula、Relation

---

#### 2. PDF 阅读与标注（优先级：⭐⭐⭐⭐）
```
目标：打开 PDF、高亮批注、导出笔记
工作量：2-3 周
技术：react-pdf / pdf.js
存储：vault/LocalData/pdf-annotations/
```

| 阶段 | 内容 | 时间 |
|------|------|------|
| 基础渲染 | 翻页、缩放、目录 | 1 周 |
| 批注功能 | 高亮、下划线、笔记、绘图 | 1.5 周 |
| 批注管理 | 侧边栏、跳转、导出 | 0.5 周 |

---

#### 3. 地图与路线规划（优先级：⭐⭐⭐）
```
目标：地图标记 + 路线规划 + AI 助手集成
工作量：3-4 周
技术：高德地图 JS API + Web 服务 API
存储：vault/LocalData/map-data/
```

| 阶段 | 内容 | 时间 |
|------|------|------|
| 地图基础 | 高德 JS API、POI 搜索 | 1 周 |
| 标记功能 | Pin、描述、照片 | 0.5 周 |
| 路线规划 | 途经点、导航路线、GPX | 1 周 |
| AI 助手 🤖 | `plan_route` Tool、自然语言规划 | 1 周 |
| 笔记关联 | 嵌入地图、双向跳转 | 0.5 周 |

**AI 交互示例**：
```
用户: "帮我规划北京一日游，先去天安门再去故宫"
AI:   "已规划！步行 1.2km，约 15 分钟。还要加其他地方吗？"

用户: "加个王府井，改成打车"
AI:   "已更新！驾车约 20 分钟。"
```

---

### Phase 5: 体验增强
- [ ] 日记功能 - 每日笔记、日历视图
- [ ] 模板系统 - 模板变量、快速插入
- [ ] 主题系统 - CSS 主题
- [ ] 全文索引 - Rust tantivy

### Phase 6: 生态建设（长期）
- [ ] 插件系统架构
- [ ] 笔记分享 - 类 Notion 公开链接

---

## 💡 Lumina Note 差异化优势

| 优势 | 说明 |
|------|------|
| **原生 AI** | 7 个模型提供商、Agent 系统、RAG、实时编辑预览 |
| **轻量技术栈** | Tauri v2 + Rust，比 Electron 更小更快 |
| **本地优先** | 数据完全本地，隐私安全 |
| **完全开源** | MIT 许可，自由修改分发 |

---

## 📈 总结

**当前状态**：功能完整的笔记应用 + 独特 AI 能力

**核心优势**：
- ✅ 完整的 Agent 系统（4 模式 + 7 工具）
- ✅ 多模型支持（7 个 Provider）
- ✅ RAG 语义搜索
- ✅ 实时编辑预览动画

**下一步重点**：
1. Notion 风格数据库
2. PDF 阅读标注
3. 地图路线规划 + AI 助手
